!function(t){var n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=n,r.d=function(t,n,e){r.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,n){if(1&n&&(t=r(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var o in t)r.d(e,o,function(n){return t[n]}.bind(null,o));return e},r.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(n,"a",n),n},r.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},r.p="",r(r.s=30)}([function(t,n,r){var e=r(2),o=r(8);t.exports=function(t,n,r){o(t,function(o,i){if(e(t,i))return n.call(r,t[i],i,t)})}},function(t,n,r){var e=r(34),o=r(16),i=r(17);t.exports=function(t,n){if(null==t)return e;switch(typeof t){case"function":return void 0!==n?function(r,e,o){return t.call(n,r,e,o)}:t;case"object":return function(n){return i(n,t)};case"string":case"number":return o(t)}}},function(t,n){t.exports=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}},function(t,n){t.exports=function(t,n,r){var e=t.length;n=null==n?0:n<0?Math.max(e+n,0):Math.min(n,e),r=null==r?e:r<0?Math.max(e+r,0):Math.min(r,e);for(var o=[];n<r;)o.push(t[n++]);return o}},function(t,n){t.exports=function(t){return!!t&&"object"==typeof t&&t.constructor===Object}},function(t,n,r){var e=r(14),o=r(27),i=r(28),u=r(64),a=r(65),c=r(66);t.exports={illuminant:e,workspace:o,matrix:i,degree:u,rgb:a,xyz:c}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.cfs=n.distance=n.lerp=n.corLerp=void 0;var e=r(7);var o=Math,i=o.abs,u=o.pow,a=o.sqrt,c={h:360,H:400};function f(t,n,r,e){var o=c[e];o&&(i(t-n)>o/2&&(t>n?n+=o:t+=o));return((1-r)*t+r*n)%(o||1/0)}n.corLerp=f,n.lerp=function(t,n,r){var e={};for(var o in t)e[o]=f(t[o],n[o],r,o);return e},n.distance=function(t,n){var r=0;for(var e in t)r+=u(t[e]-n[e],2);return a(r)},n.cfs=function(t){return e.merge.apply(void 0,function(t){if(Array.isArray(t)){for(var n=0,r=Array(t.length);n<t.length;n++)r[n]=t[n];return r}return Array.from(t)}(t.split("").map(function(t){return e=!0,(r=t)in(n={})?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n;var n,r,e})))}},function(t,n,r){t.exports={bindAll:r(31),contains:r(33),deepFillIn:r(36),deepMatches:r(17),deepMixIn:r(37),equals:r(38),every:r(18),fillIn:r(40),filter:r(20),find:r(41),flatten:r(42),forIn:r(8),forOwn:r(0),functions:r(15),get:r(21),has:r(22),hasOwn:r(2),keys:r(44),map:r(23),matches:r(45),max:r(46),merge:r(48),min:r(51),mixIn:r(24),namespace:r(25),omit:r(53),pick:r(56),pluck:r(57),reduce:r(58),reject:r(59),result:r(60),set:r(62),size:r(26),some:r(10),unset:r(63),values:r(13)}},function(t,n,r){var e,o,i=r(2);function u(t,n,r,e){return t.call(e,n[r],r,n)}t.exports=function(t,n,r){var a,c=0;for(a in null==e&&function(){for(var t in o=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=!0,{toString:null})e=!1}(),t)if(!1===u(n,t,a,r))break;if(e)for(var f=t.constructor,s=!!f&&t===f.prototype;(a=o[c++])&&("constructor"===a&&(s||!i(t,a))||t[a]===Object.prototype[a]||!1!==u(n,t,a,r)););}},function(t,n){t.exports=function(t,n,r){if(null!=t)for(var e=-1,o=t.length;++e<o&&!1!==n.call(r,t[e],e,t););}},function(t,n,r){var e=r(0),o=r(1);t.exports=function(t,n,r){n=o(n,r);var i=!1;return e(t,function(r,e){if(n(r,e,t))return i=!0,!1}),i}},function(t,n,r){var e=r(12);t.exports=function(t,n){return e(t)===n}},function(t,n){var r,e=/^\[object (.*)\]$/,o=Object.prototype.toString;t.exports=function(t){return null===t?"Null":t===r?"Undefined":e.exec(o.call(t))[1]}},function(t,n,r){var e=r(0);t.exports=function(t){var n=[];return e(t,function(t,r){n.push(t)}),n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=(0,r(7).map)({A:{x:.44758,y:.40745},C:{x:.31006,y:.31616},D50:{x:.34567,y:.35851},D65:{x:.31272,y:.32903},D55:{x:.33243,y:.34744},D75:{x:.29903,y:.31488}},function(t){return[t.x/t.y*100,100,100*(1-t.x-t.y)/t.y]});n.default=e,t.exports=n.default},function(t,n,r){var e=r(8);t.exports=function(t){var n=[];return e(t,function(t,r){"function"==typeof t&&n.push(r)}),n.sort()}},function(t,n){t.exports=function(t){return function(n){return n[t]}}},function(t,n,r){var e=r(0),o=r(35);function i(t,n){for(var r=-1,e=t.length;++r<e;)if(u(t[r],n))return!0;return!1}function u(t,n){return t&&"object"==typeof t?o(t)&&o(n)?function(t,n){for(var r=-1,e=n.length;++r<e;)if(!i(t,n[r]))return!1;return!0}(t,n):function(t,n){var r=!0;return e(n,function(n,e){if(!u(t[e],n))return r=!1}),r}(t,n):t===n}t.exports=u},function(t,n,r){var e=r(0),o=r(1);t.exports=function(t,n,r){n=o(n,r);var i=!0;return e(t,function(r,e){if(!n(r,e,t))return i=!1,!1}),i}},function(t,n,r){var e=r(11);t.exports=function(t){return e(t,"Object")}},function(t,n,r){var e=r(0),o=r(1);t.exports=function(t,n,r){n=o(n,r);var i={};return e(t,function(t,r,e){n(t,r,e)&&(i[r]=t)}),i}},function(t,n,r){r(43);t.exports=function(t,n){for(var r=n.split("."),e=r.pop();n=r.shift();)if(null==(t=t[n]))return;return t[e]}},function(t,n,r){var e,o=r(21);t.exports=function(t,n){return o(t,n)!==e}},function(t,n,r){var e=r(0),o=r(1);t.exports=function(t,n,r){n=o(n,r);var i={};return e(t,function(t,r,e){i[r]=n(t,r,e)}),i}},function(t,n,r){var e=r(0);function o(t,n){this[n]=t}t.exports=function(t,n){for(var r,i=0,u=arguments.length;++i<u;)null!=(r=arguments[i])&&e(r,o,t);return t}},function(t,n,r){var e=r(9);t.exports=function(t,n){return n?(e(n.split("."),function(n){t[n]||(t[n]={}),t=t[n]}),t):t}},function(t,n,r){var e=r(0);t.exports=function(t){var n=0;return e(t,function(){n++}),n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=Math,o=e.pow,i=e.sign,u=e.abs,a={encode:function(t){return t<.001953125?16*t:o(t,1/1.8)},decode:function(t){return t<.03125?t/16:o(t,1.8)}};function c(t){return{decode:function(n){return i(n)*o(u(n),t)},encode:function(n){return i(n)*o(u(n),1/t)}}}var f={sRGB:{r:{x:.64,y:.33},g:{x:.3,y:.6},b:{x:.15,y:.06},gamma:{decode:function(t){return t<=.04045?t/12.92:o((t+.055)/1.055,2.4)},encode:function(t){return t<=.0031308?12.92*t:1.055*o(t,1/2.4)-.055}}},"Adobe RGB":{r:{x:.64,y:.33},g:{x:.21,y:.71},b:{x:.15,y:.06},gamma:c(2.2)},"Wide Gamut RGB":{r:{x:.7347,y:.2653},g:{x:.1152,y:.8264},b:{x:.1566,y:.0177},gamma:c(563/256)},"ProPhoto RGB":{r:{x:.7347,y:.2653},g:{x:.1596,y:.8404},b:{x:.0366,y:1e-4},gamma:a}};n.default=f,t.exports=n.default},function(t,n,r){"use strict";function e(t){return t[0][0]*(t[2][2]*t[1][1]-t[2][1]*t[1][2])+t[1][0]*(t[2][1]*t[0][2]-t[2][2]*t[0][1])+t[2][0]*(t[1][2]*t[0][1]-t[1][1]*t[0][2])}Object.defineProperty(n,"__esModule",{value:!0}),n.transpose=function(t){return[[t[0][0],t[1][0],t[2][0]],[t[0][1],t[1][1],t[2][1]],[t[0][2],t[1][2],t[2][2]]]},n.determinant=e,n.inverse=function(t){var n=1/e(t);return[[(t[2][2]*t[1][1]-t[2][1]*t[1][2])*n,(t[2][1]*t[0][2]-t[2][2]*t[0][1])*n,(t[1][2]*t[0][1]-t[1][1]*t[0][2])*n],[(t[2][0]*t[1][2]-t[2][2]*t[1][0])*n,(t[2][2]*t[0][0]-t[2][0]*t[0][2])*n,(t[1][0]*t[0][2]-t[1][2]*t[0][0])*n],[(t[2][1]*t[1][0]-t[2][0]*t[1][1])*n,(t[2][0]*t[0][1]-t[2][1]*t[0][0])*n,(t[1][1]*t[0][0]-t[1][0]*t[0][1])*n]]},n.multiply=function(t,n){return[t[0][0]*n[0]+t[0][1]*n[1]+t[0][2]*n[2],t[1][0]*n[0]+t[1][1]*n[1]+t[1][2]*n[2],t[2][0]*n[0]+t[2][1]*n[1]+t[2][2]*n[2]]},n.scalar=function(t,n){return[[t[0][0]*n[0],t[0][1]*n[1],t[0][2]*n[2]],[t[1][0]*n[0],t[1][1]*n[1],t[1][2]*n[2]],[t[2][0]*n[0],t[2][1]*n[1],t[2][2]*n[2]]]},n.product=function(t,n){return[[t[0][0]*n[0][0]+t[0][1]*n[1][0]+t[0][2]*n[2][0],t[0][0]*n[0][1]+t[0][1]*n[1][1]+t[0][2]*n[2][1],t[0][0]*n[0][2]+t[0][1]*n[1][2]+t[0][2]*n[2][2]],[t[1][0]*n[0][0]+t[1][1]*n[1][0]+t[1][2]*n[2][0],t[1][0]*n[0][1]+t[1][1]*n[1][1]+t[1][2]*n[2][1],t[1][0]*n[0][2]+t[1][1]*n[1][2]+t[1][2]*n[2][2]],[t[2][0]*n[0][0]+t[2][1]*n[1][0]+t[2][2]*n[2][0],t[2][0]*n[0][1]+t[2][1]*n[1][1]+t[2][2]*n[2][1],t[2][0]*n[0][2]+t[2][1]*n[1][2]+t[2][2]*n[2][2]]]}},function(t,n,r){"use strict";var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){o=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(n,"__esModule",{value:!0}),n.toNotation=n.fromNotation=n.toHue=n.fromHue=void 0;var o=r(6),i=Math.floor,u=[{s:"R",h:20.14,e:.8,H:0},{s:"Y",h:90,e:.7,H:100},{s:"G",h:164.25,e:1,H:200},{s:"B",h:237.53,e:1.2,H:300},{s:"R",h:380.14,e:.8,H:400}],a=u.map(function(t){return t.s}).slice(0,-1).join("");var c={O:"RY",S:"YG",T:"G25B",C:"GB",A:"B25G",V:"B25R",M:"BR",P:"R25B"};n.fromHue=function(t){t<u[0].h&&(t+=360);for(var n=0;u[n+1].h<t;)n++;var r=(t-u[n].h)/u[n].e,e=(u[n+1].h-t)/u[n+1].e;return u[n].H+100*r/(r+e)},n.toHue=function(t){var n=i(t/100),r=t%100,o=u.slice(n,n+2),a=e(o,2),c=a[0],f=c.e,s=c.h,l=a[1],v=l.e;return(r*(v*s-f*l.h)-100*s*v)/(r*(v-f)-100*v)},n.fromNotation=function t(n){var r=n.match(/^([a-z])(?:(.+)?([a-z]))?$/i),i=e(r,4),u=i[1],f=i[2],s=i[3];void 0===s&&(s=u),void 0===f&&(f="50");var l=[u,s].map(function(n){n=n.toUpperCase();var r=c[n];return r?t(r):100*a.indexOf(n)}),v=e(l,2);return u=v[0],s=v[1],f=parseFloat(f)/100,(0,o.corLerp)(u,s,f,"H")},n.toNotation=function(t){var n=i(t/100),r=(n+1)%a.length,e=t-100*n;if(e>50){var o=[r,n];n=o[0],r=o[1],e=100-e}return e<1?a[n]:a[n]+e.toFixed()+a[r]}},function(t,n,r){"use strict";var e=r(5),o=r(67),i=r(71),u=o.cam({whitePoint:e.illuminant.D65,adaptingLuminance:40,backgroundLuminance:20,surroundType:"average",discounting:!1},o.cfs("JCh")),a=e.xyz(e.workspace.sRGB,e.illuminant.D65);function c(t,n){return n=String(n),Array(t-n.length+1).join("0")+n}function f(t,n){return"-"==(n=String(n))[0]?"-"+Array(t-n.length+2).join("0")+n.slice(1):"+"+Array(t-n.length+1).join("0")+n}function s(t){var n=100*t[0],r=100*Math.sqrt(t[1]*t[1]+t[2]*t[2]),e=180*Math.atan2(t[2],t[1])/Math.PI;return e<0&&(e+=360),[n,r,e]}function l(t){var n=t[1]/100,r=t[2]*Math.PI/180;return[t[0]/100,n*Math.cos(r),n*Math.sin(r)]}function v(t){var n=t[1],r=t[2],e=Math.atan2(r,n);return e<0&&(e+=2*Math.PI),[100*(1-Math.sqrt(n*n+r*r)),100*t[0],180*e/Math.PI]}function h(t,n){return[t[2],(2*t[0]-1)*n,(2*t[1]-1)*n]}function p(t,n){return[(t[1]/n+1)/2,(t[2]/n+1)/2,t[0]]}function d(t,n){return[n*t[2],2*t[0]-1,2*t[1]-1]}function m(t,n){return[(t[1]+1)/2,(t[2]+1)/2,t[0]/n]}function g(t){var n=!0;return t[0]<0?(n=!1,t[0]=0):t[0]>1&&(n=!1,t[0]=1),t[1]<0?(n=!1,t[1]=0):t[1]>1&&(n=!1,t[1]=1),t[2]<0?(n=!1,t[2]=0):t[2]>1&&(n=!1,t[2]=1),n}function y(t){var n;if(n=/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/.exec(t)){var r=[parseInt(n[1])/255,parseInt(n[2])/255,parseInt(n[3])/255];return g(r),r}return t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(t,n,r,e){return n+n+r+r+e+e}),(n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t))?[parseInt(n[1],16)/255,parseInt(n[2],16)/255,parseInt(n[3],16)/255]:null}function x(t){return g(t=t.slice()),"#"+(16777216+(255*t[0]<<16|255*t[1]<<8|255*t[2])).toString(16).slice(1)}function b(t){return{value:t,inGamut:!0}}function w(t,n,r){t.beginPath(),t.arc(n/2,r/2,n/2,0,2*Math.PI),t.closePath(),t.clip()}var M={SRGB:{mask:function(t){},fromSrgb:b,toSrgb:b},LAB_HCL:{mask:w,display:function(t){return"(L="+c(3,(100*t[0]).toFixed(0))+", a="+f(3,(100*t[1]).toFixed(0))+", b="+f(3,(100*t[2]).toFixed(0))+")"},transform:h,untransform:p,toSrgb:i.cielabToSrgb,fromSrgb:i.srgbToCielab},LAB_HLC:{mask:w,display:function(t){var n=t[1],r=t[2],e=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<0&&(o+=2*Math.PI),"(H="+c(3,(o*=180/Math.PI).toFixed(0))+"°, C="+c(3,(100*t[0]).toFixed(0))+", L="+c(3,(100*(1-e)).toFixed(0))+")"},transform:d,untransform:m,toSrgb:function(t){var n,r=t[1],e=t[2],o=Math.sqrt(r*r+e*e);return n=o<1e-8?[1,0,0]:[1-o,t[0]*r/o,t[0]*e/o],i.cielabToSrgb(n)},fromSrgb:function(t){var n=i.srgbToCielab(t),r=n.value,e=1-r[0],o=Math.sqrt(r[1]*r[1]+r[2]*r[2]),u=[o,0,0];return o<1e-8?u[1]=e:(u[1]=r[1]/o*e,u[2]=r[2]/o*e),{value:u,inGamut:n.inGamut}}},CAM02_HCL:{mask:w,display:function(t){var n=s(t);return"(J="+c(3,n[0].toFixed(0))+", C="+c(3,n[1].toFixed(0))+", h="+c(3,n[2].toFixed(0))+"°)"},transform:h,untransform:p,toSrgb:function(t){var n=s(t);n={J:n[0],C:n[1],h:n[2]};var r=a.toRgb(u.toXyz(n));return{value:r,inGamut:g(r)}},fromSrgb:function(t){var n=u.fromXyz(a.fromRgb(t));return{value:l([n.J,n.C,n.h]),inGamut:!0}}},CAM02_HLC:{mask:w,display:function(t){var n=v(t);return"(J="+c(3,n[0].toFixed(0))+", C="+c(3,n[1].toFixed(0))+", h="+c(3,n[2].toFixed(0))+"°)"},transform:d,untransform:m,toSrgb:function(t){var n=v(t);n={J:n[0],C:n[1],h:n[2]};var r=a.toRgb(u.toXyz(n));return{value:r,inGamut:g(r)}},fromSrgb:function(t){var n=u.fromXyz(a.fromRgb(t)),r=1-n.J/100,e=n.h*Math.PI/180;return{value:[n.C/100,r*Math.cos(e),r*Math.sin(e)],inGamut:!0}}}};function C(){var t=this;function n(n){t.shift=n||function(){}}var r=n;n(),this.push=function(t){function e(){r=n}r(function(){return n(),e(),t}),r=function(t){e=n.bind(null,t)}}}function _(t,n){var r=[];this.workers=r;for(var e=0;e<n;++e)!function(){var n=new Worker(t),e=new C;n.onmessage=function(t){e.shift()(t.data)},r.push({worker:n,backlog:e})}();this.nextWorker=0}Object.defineProperty(_.prototype,"length",{get:function(){return this.workers.length}}),_.prototype.submit=function(t,n){var r=this.workers[this.nextWorker];r.backlog.push(n),r.worker.postMessage(t),this.nextWorker=(this.nextWorker+1)%this.workers.length};var S={cartesian:function(t,n,r,e,o,i,u){for(var a=M[u].transform,c=M[u].toSrgb,f=[0,0,i],s=new Uint8ClampedArray(4*t*(e-r)),l=r;l<e;++l){f[1]=1-l/n;for(var v=0;v<t;++v){f[0]=v/t;var h=c(a(f,o)),p=h.value;if(!h.inGamut){var d=(p[0]+p[1]+p[2])/3;p[0]=.5*p[0]+.5*d-.1,p[1]=.5*p[1]+.5*d-.1,p[2]=.5*p[2]+.5*d-.1}var m=4*(v+t*(l-r));s[m+0]=255*p[0],s[m+1]=255*p[1],s[m+2]=255*p[2],s[m+3]=255}}return s}};function P(t,n){this.ctx=t.getContext("2d"),this.width=t.width,this.height=t.height,this.img=this.ctx.createImageData(this.width,this.height),this.workerPool=n,this.colorState=new j("SRGB",[.65,.65,.65]),this.view="SRGB",this.maxChroma=.75,this.currentHash="",this.onsave=function(t){},this.ondraw=function(){},this.drawScheduled=!1,this.drawFull=!1,this.redraw(!0)}function j(t,n){this.set(t,n)}P.prototype.redraw=function(t){if(this.drawFull=this.drawFull||t,!this.drawScheduled){this.drawScheduled=!0;var n=this;window.requestAnimationFrame(function(){function t(){n.ondraw(),createImageBitmap(n.img).then(function(t){var r=n.ctx,e=n.getColor(),o=e[0]*n.width,i=(1-e[1])*n.height;r.clearRect(0,0,n.width,n.height),r.save(),M[n.view].mask(r,n.width,n.height),r.drawImage(t,0,0),r.restore(),r.strokeStyle="white",r.beginPath(),r.arc(o,i,4,0,2*Math.PI),r.stroke(),r.strokeStyle="black",r.beginPath(),r.arc(o,i,5,0,2*Math.PI),r.stroke()}),n.drawScheduled=!1,n.drawFull=!1}if(n.drawFull){console.time("redraw");for(var r=n.getColorInpZ(),e=Math.round(n.height/n.workerPool.length),o=0,i=0;i<n.height;i+=e){var u=i+e;u>n.height&&(u=n.height),o+=1,n.workerPool.submit({call:"cartesian",args:[n.width,n.height,i,u,n.maxChroma,r,n.view]},function(r){return function(e){n.img.data.set(e,4*n.width*r),0==(o-=1)&&(console.timeEnd("redraw"),t())}}(i))}}else t()})}},P.prototype.getColor=function(){return M[this.view].untransform(this.colorState.get(this.view).value,this.maxChroma)},P.prototype.setColor=function(t){var n=this.getColorInpZ();this.colorState.set(this.view,M[this.view].transform(t,this.maxChroma)),this.redraw(n!=t[2])},P.prototype.getColorInpZ=function(){return this.getColor()[2]},P.prototype.setColorInpZ=function(t){var n=this.getColor().slice();n[2]=t,this.setColor(n)},P.prototype.getColorDisplay=function(){return M[this.view].display(this.colorState.get(this.view).value)},P.prototype.getTextColor=function(){var t=this.colorState.get("SRGB").value;return{hex:x(t),rgb:"rgb("+(255*t[0]).toFixed(0)+", "+(255*t[1]).toFixed(0)+", "+(255*t[2]).toFixed(0)+")"}},P.prototype.saveTextColor=function(t){var n=y(t);null!=n&&(this.colorState.set("SRGB",n),this.save(),this.redraw(!0))},P.prototype.setView=function(t){this.view=t,this.redraw(!0)},P.prototype.setMaxChromaPercent=function(t){this.maxChroma=Number(t)/100,this.redraw(!0)},P.prototype.restore=function(t){if(t!=this.currentHash){var n=y(t);null!=n&&(this.currentHash=t,this.colorState.set("SRGB",n),this.redraw(!0))}},P.prototype.save=function(){this.currentHash=this.colorState.save(),this.onsave(this.currentHash)},j.prototype.get=function(t){if(this.view==t)return{value:this.color,inGamut:!0};var n=M[this.view].toSrgb(this.color),r=M[t].fromSrgb(n.value);return{value:r.value,inGamut:n.inGamut&&r.inGamut}},j.prototype.set=function(t,n,r){this.view=t,this.color=n},j.prototype.save=function(){return x(this.get("SRGB").value)},function(){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope)onmessage=function(t){postMessage(S[t.data.call].apply(null,t.data.args))};else{var t=new _("script.js",navigator.hardwareConcurrency||4),n=document.getElementById("canvas");n.width=400,n.height=400;var r=new P(n,t);r.onsave=function(t){window.location.hash=t},window.addEventListener("hashchange",function(){r.restore(window.location.hash)}),r.restore(window.location.hash);var e=document.getElementById("slider"),o=document.getElementById("color");e.addEventListener("input",function(t){r.setColorInpZ(e.value/e.max)}),e.addEventListener("change",function(t){r.save()}),o.addEventListener("blur",function(t){r.saveTextColor(this.value)}),o.addEventListener("keydown",function(t){"Enter"==t.key&&r.saveTextColor(this.value)}),r.ondraw=function(){e.value=r.getColorInpZ()*e.max,document.getElementById("display").textContent=r.getColorDisplay();var t=r.getTextColor();o.value=t.hex,document.getElementById("preview").style.backgroundColor=t.hex,document.getElementById("display-rgb").textContent=t.rgb};var i=!1;n.addEventListener("mousedown",function(t){1&t.buttons&&(t.preventDefault(),i=!0,a(t))}),n.addEventListener("mousemove",function(t){i&&(t.preventDefault(),a(t))}),n.addEventListener("mouseup",function(t){t.preventDefault(),r.save(),i=!1});var u=document.getElementById("max-chroma");r.setMaxChromaPercent(u.value),u.addEventListener("input",function(t){r.setMaxChromaPercent(this.value)}),["LAB_HCL","LAB_HLC","CAM02_HCL","CAM02_HLC"].forEach(function(t){var n="view-"+t.replace("_","-").toLowerCase(),e=document.getElementById(n);e.checked&&r.setView(t),e.addEventListener("change",function(n){r.setView(t)})})}function a(t){r.setColor([t.offsetX/n.clientWidth,1-t.offsetY/n.clientHeight,e.value/e.max])}}()},function(t,n,r){var e=r(15),o=r(32),i=r(9),u=r(3);t.exports=function(t,n){var r=arguments.length>1?u(arguments,1):e(t);i(r,function(n){t[n]=o(t[n],t)})}},function(t,n,r){var e=r(3);t.exports=function(t,n,r){var o=e(arguments,2);return function(){return t.apply(n,o.concat(e(arguments)))}}},function(t,n,r){var e=r(10);t.exports=function(t,n){return e(t,function(t){return t===n})}},function(t,n){t.exports=function(t){return t}},function(t,n,r){var e=r(11),o=Array.isArray||function(t){return e(t,"Array")};t.exports=o},function(t,n,r){var e=r(0),o=r(4);t.exports=function t(n,r){for(var i,u=0,a=arguments.length;++u<a;)(i=arguments[u])&&e(i,function(r,e){var i=n[e];null==i?n[e]=r:o(i)&&o(r)&&t(i,r)});return n}},function(t,n,r){var e=r(0),o=r(4);function i(t,n){for(var r,o=0,i=arguments.length;++o<i;)(r=arguments[o])&&e(r,u,t);return t}function u(t,n){var r=this[n];o(t)&&o(r)?i(r,t):this[n]=t}t.exports=i},function(t,n,r){var e=r(2),o=r(18),i=r(19),u=r(39);function a(t,n){return e(this,n)}t.exports=function(t,n,r){return r=r||u,i(t)&&i(n)?o(t,function(t){return function(n,r){return e(this,r)&&t(n,this[r])}}(r),n)&&o(n,a,t):r(t,n)}},function(t,n){t.exports=function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n}},function(t,n,r){var e=r(9),o=r(3),i=r(0);t.exports=function(t,n){return e(o(arguments,1),function(n){i(n,function(n,r){null==t[r]&&(t[r]=n)})}),t}},function(t,n,r){var e=r(10),o=r(1);t.exports=function(t,n,r){var i;return n=o(n,r),e(t,function(t,r,e){if(n(t,r,e))return i=t,!0}),i}},function(t,n,r){var e=r(0),o=r(4);t.exports=function(t,n){return null==t?{}:function t(n,r,i,u){return e(n,function(n,e){var a=i?i+"."+e:e;0!==u&&o(n)?t(n,r,a,u-1):r[a]=n}),r}(t,{},"",n=null==n?-1:n)}},function(t,n){t.exports=function(t){switch(typeof t){case"string":case"number":case"boolean":return!0}return null==t}},function(t,n,r){var e=r(0),o=Object.keys||function(t){var n=[];return e(t,function(t,r){n.push(r)}),n};t.exports=o},function(t,n,r){var e=r(0);t.exports=function(t,n){var r=!0;return e(n,function(n,e){if(t[e]!==n)return r=!1}),r}},function(t,n,r){var e=r(47),o=r(13);t.exports=function(t,n){return e(o(t),n)}},function(t,n,r){var e=r(1);t.exports=function(t,n,r){if(null!=t&&t.length){if(t.length&&!n)return Math.max.apply(Math,t);n=e(n,r);for(var o,i,u,a=-1/0,c=-1,f=t.length;++c<f;)(u=n(i=t[c],c,t))>a&&(a=u,o=i);return o}return 1/0}},function(t,n,r){var e=r(2),o=r(49),i=r(19);t.exports=function t(){var n,r,u,a,c=1;for(a=o(arguments[0]);u=arguments[c++];)for(n in u)e(u,n)&&(r=u[n],i(r)&&i(a[n])?a[n]=t(a[n],r):a[n]=o(r));return a}},function(t,n,r){var e=r(50),o=r(0),i=r(12),u=r(4);function a(t,n){switch(i(t)){case"Object":return function(t,n){if(u(t)){var r={};return o(t,function(t,r){this[r]=a(t,n)},r),r}return n?n(t):t}(t,n);case"Array":return function(t,n){var r=[],e=-1,o=t.length;for(;++e<o;)r[e]=a(t[e],n);return r}(t,n);default:return e(t)}}t.exports=a},function(t,n,r){var e=r(12),o=r(4),i=r(24);t.exports=function(t){switch(e(t)){case"Object":return o(u=t)?i({},u):u;case"Array":return t.slice();case"RegExp":return r="",r+=(n=t).multiline?"m":"",r+=n.global?"g":"",r+=n.ignoreCase?"i":"",new RegExp(n.source,r);case"Date":return new Date(+t);default:return t}var n,r,u}},function(t,n,r){var e=r(52),o=r(13);t.exports=function(t,n){return e(o(t),n)}},function(t,n,r){var e=r(1);t.exports=function(t,n,r){if(null!=t&&t.length){if(t.length&&!n)return Math.min.apply(Math,t);n=e(n,r);for(var o,i,u,a=1/0,c=-1,f=t.length;++c<f;)(u=n(i=t[c],c,t))<a&&(a=u,o=i);return o}return-1/0}},function(t,n,r){var e=r(3),o=r(54);t.exports=function(t,n){var r="string"!=typeof arguments[1]?arguments[1]:e(arguments,1),i={};for(var u in t)t.hasOwnProperty(u)&&!o(r,u)&&(i[u]=t[u]);return i}},function(t,n,r){var e=r(55);t.exports=function(t,n){return-1!==e(t,n)}},function(t,n){t.exports=function(t,n,r){if(r=r||0,null==t)return-1;for(var e=t.length,o=r<0?e+r:r;o<e;){if(t[o]===n)return o;o++}return-1}},function(t,n,r){var e=r(3);t.exports=function(t,n){for(var r,o="string"!=typeof arguments[1]?arguments[1]:e(arguments,1),i={},u=0;r=o[u++];)i[r]=t[r];return i}},function(t,n,r){var e=r(23),o=r(16);t.exports=function(t,n){return e(t,o(n))}},function(t,n,r){var e=r(0),o=r(26);t.exports=function(t,n,r,i){var u=arguments.length>2;if(!o(t)&&!u)throw new Error("reduce of empty object with no initial value");return e(t,function(t,e,o){u?r=n.call(i,r,t,e,o):(r=t,u=!0)}),r}},function(t,n,r){var e=r(20),o=r(1);t.exports=function(t,n,r){return n=o(n,r),e(t,function(t,r,e){return!n(t,r,e)},r)}},function(t,n,r){var e=r(61);t.exports=function(t,n){var r=t[n];if(void 0!==r)return e(r)?r.call(t):r}},function(t,n,r){var e=r(11);t.exports=function(t){return e(t,"Function")}},function(t,n,r){var e=r(25);t.exports=function(t,n,r){var o=/^(.+)\.(.+)$/.exec(n);o?e(t,o[1])[o[2]]=r:t[n]=r}},function(t,n,r){var e=r(22);t.exports=function(t,n){if(e(t,n)){for(var r=n.split("."),o=r.pop();n=r.shift();)t=t[n];return delete t[o]}return!0}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=Math.PI;n.fromRadian=function(t){for(var n=180*t/e;n<0;)n+=360;for(;n>360;)n-=360;return n},n.toRadian=function(t){for(var n=e*t/180;n<0;)n+=2*e;for(;n>2*e;)n-=2*e;return n}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=Math.round;n.fromHex=function(t){return"#"==t[0]&&(t=t.slice(1)),t.length<6&&(t=t.split("").map(function(t){return t+t}).join("")),t.match(/../g).map(function(t){return parseInt(t,16)/255})},n.toHex=function(t){return"#"+t.map(function(t){return(t=e(255*t).toString(16)).length<2&&(t="0"+t),t}).join("")}},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(28)),o=u(r(14)),i=u(r(27));function u(t){return t&&t.__esModule?t:{default:t}}n.default=function(){var t=arguments.length<=0||void 0===arguments[0]?i.default.sRGB:arguments[0],n=arguments.length<=1||void 0===arguments[1]?o.default.D65:arguments[1],r=[t.r,t.g,t.b],u=e.transpose(r.map(function(t){return[t.x/t.y,1,(1-t.x-t.y)/t.y]})),a=t.gamma,c=e.multiply(e.inverse(u),n),f=e.scalar(u,c),s=e.inverse(f);return{fromRgb:function(t){return e.multiply(f,t.map(a.decode))},toRgb:function(t){return e.multiply(s,t).map(a.encode)}}},t.exports=n.default},function(t,n,r){var e=r(6),o=r(68),i=r(69),u=r(70),a=r(29);t.exports={gamut:o,cfs:e.cfs,lerp:e.lerp,cam:i,ucs:u,hq:a}},function(t,n,r){"use strict";var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){o=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(5),i=r(6);n.default=function(t,n){var r=arguments.length<=2||void 0===arguments[2]?1e-6:arguments[2],u=-r,a=1+r,c=Math,f=c.min,s=c.max,l=["000","fff"].map(function(r){return n.fromXyz(t.fromRgb(o.rgb.fromHex(r)))}),v=e(l,2),h=v[0],p=v[1];function d(r){var e=t.toRgb(n.toXyz(r));return[e.map(function(t){return t>=u&&t<=a}).reduce(function(t,n){return t&&n},!0),e]}return{contains:d,limit:function(t,n){for(var r=arguments.length<=2||void 0===arguments[2]?.001:arguments[2];(0,i.distance)(t,n)>r;){var o=(0,i.lerp)(t,n,.5),u=d(o);e(u,1)[0]?t=o:n=o}return t},spine:function(t){return(0,i.lerp)(h,p,t)},crop:function(t){return t.map(function(t){return s(u,f(a,t))})}}},t.exports=n.default},function(t,n,r){"use strict";var e=function(){return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,n){var r=[],e=!0,o=!1,i=void 0;try{for(var u,a=t[Symbol.iterator]();!(e=(u=a.next()).done)&&(r.push(u.value),!n||r.length!==n);e=!0);}catch(t){o=!0,i=t}finally{try{!e&&a.return&&a.return()}finally{if(o)throw i}}return r}(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();Object.defineProperty(n,"__esModule",{value:!0});var o=r(5),i=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n.default=t,n}(r(29)),u=r(6),a=r(7);var c=Math,f=c.pow,s=c.sqrt,l=c.exp,v=c.abs,h=c.sign,p=Math,d=p.sin,m=p.cos,g=p.atan2,y={average:{F:1,c:.69,N_c:1},dim:{F:.9,c:.59,N_c:.9},dark:{F:.8,c:.535,N_c:.8}},x=[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],b=[[.38971,.68898,-.07868],[-.22981,1.1834,.04641],[0,0,1]],w=x,M=o.matrix.inverse(x),C=o.matrix.product(b,o.matrix.inverse(x)),_=o.matrix.product(x,o.matrix.inverse(b)),S={whitePoint:o.illuminant.D65,adaptingLuminance:40,backgroundLuminance:20,surroundType:"average",discounting:!1},P=(0,u.cfs)("QJMCshH"),j=(0,u.cfs)("JCh");n.default=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?P:arguments[1],r=(t=(0,a.merge)(S,t)).whitePoint,u=t.adaptingLuminance,c=t.backgroundLuminance,p=y[t.surroundType],b=p.F,O=p.c,k=p.N_c,I=r[1],L=1/(5*u+1),H=.2*f(L,4)*5*u+.1*f(1-f(L,4),2)*f(5*u,1/3),R=c/I,G=.725*f(1/R,.2),N=G,B=1.48+s(R),A=t.discounting?1:b*(1-1/3.6*l(-(u+42)/92)),F=o.matrix.multiply(x,r).map(function(t){return A*I/t+1-A}),E=e(F,3),J=E[0],T=E[1],D=E[2],z=X(W(q(r)));function q(t){var n=o.matrix.multiply(w,t),r=e(n,3),i=r[0],u=r[1],a=r[2];return[J*i,T*u,D*a]}function W(t){return o.matrix.multiply(C,t).map(function(t){var n=f(H*v(t)/100,.42);return 400*h(t)*n/(27.13+n)+.1})}function X(t){var n=e(t,3);return(2*n[0]+n[1]+n[2]/20-.305)*G}function Z(t){return 4/O*s(t/100)*(z+4)*f(H,.25)}function U(t){return t*f(H,.25)}function $(t,n){var r=n.Q,e=n.J,o=n.M,u=n.C,a=n.s,c=n.h,l=n.H,v={};return t.J&&(v.J=isNaN(e)?function(t){return 6.25*f(O*t/((z+4)*f(H,.25)),2)}(r):e),t.C&&(isNaN(u)?isNaN(o)?(r=isNaN(r)?Z(e):r,v.C=function(t,n){return f(t/100,2)*n/f(H,.25)}(a,r)):v.C=function(t){return t/f(H,.25)}(o):v.C=n.C),t.h&&(v.h=isNaN(c)?i.toHue(l):c),t.Q&&(v.Q=isNaN(r)?Z(e):r),t.M&&(v.M=isNaN(o)?U(u):o),t.s&&(isNaN(a)?(r=isNaN(r)?Z(e):r,o=isNaN(o)?U(u):o,v.s=function(t,n){return 100*s(t/n)}(o,r)):v.s=a),t.H&&(v.H=isNaN(l)?i.fromHue(c):l),v}return{fromXyz:function(t){var r=W(q(t)),i=e(r,3),u=i[0],a=i[1],c=i[2],l=u-12*a/11+c/11,v=(u+a-2*c)/9,h=g(v,l),p=o.degree.fromRadian(h),d=.25*(m(h+2)+3.8),y=X(r),x=100*f(y/z,O*B),b=5e4/13*k*N*d*s(l*l+v*v)/(u+a+1.05*c),w=f(b,.9)*s(x/100)*f(1.64-f(.29,R),.73);return $(n,{J:x,C:w,h:p})},toXyz:function(t){var n,r,i=$(j,t),u=i.J,a=i.C,c=i.h,l=o.degree.toRadian(c),p=f(a/(s(u/100)*f(1.64-f(.29,R),.73)),10/9),g=.25*(m(l+2)+3.8),y=z*f(u/100,1/O/B),x=5e4/13*k*N*g/p,b=y/G+.305,w=61*b/20*460/1403,C=4.695652173913044,S=d(l),P=m(l);return 0===p||isNaN(p)?n=r=0:v(S)>=v(P)?n=(r=w/(x/S+671/1403*P/S+C))*P/S:r=(n=w/(x/P+671/1403+C*S/P))*S/P,function(t){var n=e(t,3),r=n[0],i=n[1],u=n[2];return o.matrix.multiply(M,[r/J,i/T,u/D])}(function(t){return o.matrix.multiply(_,t.map(function(t){var n=t-.1;return 100*h(n)/H*f(27.13*v(n)/(400-v(n)),1/.42)}))}([20/61*b+451/1403*n+288/1403*r,20/61*b-891/1403*n-261/1403*r,20/61*b-220/1403*n-6300/1403*r]))},fillOut:$}},t.exports=n.default},function(t,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=r(5),o=Math,i=o.sqrt,u=o.pow,a=o.exp,c=o.log,f=o.cos,s=o.sin,l=o.atan2,v={LCD:{K_L:.77,c_1:.007,c_2:.0053},SCD:{K_L:1.24,c_1:.007,c_2:.0363},UCS:{K_L:1,c_1:.007,c_2:.0228}};n.default=function(){var t=arguments.length<=0||void 0===arguments[0]?"UCS":arguments[0],n=v[t],r=n.K_L,o=n.c_1,h=n.c_2;return{fromCam:function(t){var n=t.J,r=t.M,i=t.h,u=e.degree.toRadian(i),a=(1+100*o)*n/(1+o*n),l=1/h*c(1+h*r);return{J_p:a,a_p:l*f(u),b_p:l*s(u)}},toCam:function(t){var n=t.J_p,r=t.a_p,c=t.b_p,f=-n/(o*n-100*o-1),s=i(u(r,2)+u(c,2)),v=(a(h*s)-1)/h,p=l(c,r);return{J:f,M:v,h:e.degree.fromRadian(p)}},distance:function(t,n){return i(u((t.J_p-n.J_p)/r,2)+u(t.a_p-n.a_p,2)+u(t.b_p-n.b_p,2))}}},t.exports=n.default},function(t,n){var r=[.95047,1,1.08883],e=6/29,o=Math.pow(29/6,2)/3,i=4/29,u=3,a=1/u,c=Math.pow(e,u),f=[[0,1.16,0],[5,-5,0],[0,2,-2]],s=[[.86206897,.2,0],[.86206897,0,0],[.86206897,0,-.5]],l=-.16;function v(t){return t<=c?o*t+i:Math.pow(t,a)}function h(t){return t<=e?(t-i)/o:Math.pow(t,u)}function p(t,n,r){r[0]=t[0][0]*n[0]+t[0][1]*n[1]+t[0][2]*n[2],r[1]=t[1][0]*n[0]+t[1][1]*n[1]+t[1][2]*n[2],r[2]=t[2][0]*n[0]+t[2][1]*n[1]+t[2][2]*n[2]}var d=.04045,m=12.92,g=2.4,y=.055,x=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]],b=[[.41239559,.35758343,.18049265],[.21258623,.7151703,.0722005],[.01929722,.11918386,.95049713]];function w(t,n){return t>1?(t=1,n[0]=!0):t<0&&(t=0,n[0]=!0),t<=d/m?m*t:(1+y)*Math.pow(t,1/g)-y}function M(t,n){return t>1?t=1:t<0&&(t=0),t<=d?t/m:Math.pow((t+y)/(1+y),g)}n.srgbToCielab=function(t){var n=[0,0,0];!function(t,n){p(b,[M(t[0]),M(t[1]),M(t[2])],n)}(t,n);var e=[0,0,0];return function(t,n){var e=[v(t[0]/r[0]),v(t[1]/r[1]),v(t[2]/r[2])];p(f,e,n),n[0]+=l}(n,e),{value:e,inGamut:!0}},n.cielabToSrgb=function(t){var n=[0,0,0];!function(t,n){t[0]-=l,p(s,t,n),t[0]+=l,n[0]=h(n[0])*r[0],n[1]=h(n[1])*r[1],n[2]=h(n[2])*r[2]}(t,n);var e=[!1],o=[0,0,0];return function(t,n,r){p(x,t,n),n[0]=w(n[0],r),n[1]=w(n[1],r),n[2]=w(n[2],r)}(n,o,e),{value:o,inGamut:!e[0]}}}]);
//# sourceMappingURL=script.js.map